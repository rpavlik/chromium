<!-- Copyright (c) 2001, Stanford University
     All rights reserved.

	 See the file LICENSE.txt for information on redistributing this software.  -->
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>Configuration options</title>
<link rel="stylesheet" type="text/css" href="chromium.css">
</head>

<body bgcolor="#FFFFFF">

<h1 class="PageHeading">Provided SPU's</h1>
<p>This page describes the Stream Processing Units (SPUs) provided with
Chromium, including all their options.
</p>

<p>Example of setting SPU parameters are:</p>
<code>
spu = SPU('render')<br>
spu.Conf('window_geometry', [0, 0, 512, 512])<br>
spu.Conf('window_title', 'my window')<br>
spu.Conf('resizable', 1)<br>
<BR>
<code>
spu = SPU('tilesort')<br>
spu.Conf('bucket_mode', 'Uniform Grid')
</code>

<p>
Users should examine the sample Chromium configuration files to see how
some of these SPUs are used.
</p>

<p>
Note that brackets must be put around configuration parameters when
there's more than one value (i.e. use Python's list syntax).
For example, the hiddenline SPU's fog_color parameter is specified with
three floating point values.
They must be contained in brackets:
</p>
<code>
spu = SPU('hiddenline')<br>
spu.Conf('fog_color', [ 1.0, 0.5, 0.25 ])
</code>


<h3>
SPU index
</h3>
<ul>
<li><a href="#print">Print</a>
<li><a href="#render">Render</a>
<li><a href="#pack">Pack</a>
<li><a href="#readback">Readback</a>
<li><a href="#tilesort">Tilesort</a>
<li><a href="#binaryswap">Binaryswap</a>
<li><a href="#saveframe">Saveframe</a>
<li><a href="#motionblur">Motionblur</a>
<li><a href="#hiddenline">Hiddenline</a>
<li><a href="#wet">Wet</a>
<li><a href="#perf">Perf</a>
<li><a href="#array">Array</a>
<li><a href="#feedback">Feedback</a>
<li><a href="#expando">Expando</a>
<li><a href="#injector">Injector</a>
<li><a href="#replicate">Replicate</a>
<li><a href="#simplequery">Simplequery</a>
<li><a href="#zpix">ZPix</a>
<li><a href="#nop">Nop</a>
</ul>


<a name="print">
<h2 class="PageSubHeading">Print SPU </h2>
<p>
The Print SPU prints each OpenGL command to stderr or a file.
It's useful for debugging Chromium and inspecting the OpenGL commands
issued by applications
</p>
<table border="1" width="100%">
  <tr class="ConfigTableHeader">
    <td width="19%">Parameter Name</td>
    <td width="12%">Value Types</td>
    <td width="115%">Description</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption">log_file</td>
    <td width="12%" class="ConfigType">String</td>
    <td width="115%" class="ConfigDesc">Name of log file to generate.&nbsp;
          If this parameter is not specified, the Print SPU will send
          its output to standard error.  
	  If this is a relative path, the file will be created relative
	  to the current directory, which will usually be either the directory
	  that the server was launched from, or the start directory specified
	  for the application node.  If no start directory was specified, the
	  client log file will appear in the directory that
	  <code>crappfaker</code> was run from.</td>
  </tr>
</table>


<a name="render">
<h2 class="PageSubHeading">Render SPU</h2>
<p>
The Render SPU renders OpenGL commands into a window.  Virtually every
Chromium configuration uses this SPU.
</p>
<table border="1" width="100%" height="149">
  <tr class="ConfigTableHeader">
    <td width="19%" height="19">Parameter Name</td>
    <td width="12%" height="19">Value Types</td>
    <td width="115%" height="19">Description</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="74">window_geometry</td>
    <td width="12%" class="ConfigType" height="74">4 Integers</td>
    <td width="115%" class="ConfigDesc" height="74">Geometry of the window to
      create.&nbsp; This is specified as four floating point numbers.&nbsp; The
      first two give the (<i>x</i>,<i>y</i>) position of the upper left corner
      of the window, relative to the upper left corner of the screen.&nbsp; The
      last two numbers give the width and height of the window,
      respectively.&nbsp; The default is [0, 0, 256, 256].</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">default_visual</td>
    <td width="12%" class="ConfigType" height="38">String</td>
    <td width="115%" class="ConfigDesc" height="38">The default visual used
      for windows and rendering contexts can be set by specifying a
      comma-separated list of the following tokens: <em>rgb, alpha,
      depth (or z), double, stencil, accum, stereo, multisample</em>.
      The visual is normally determined by the application program, but
      in some cases, this option is useful.
      The default is <em>"rgb"</em>.</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">fullscreen</td>
    <td width="12%" class="ConfigType" height="38">Boolean</td>
    <td width="115%" class="ConfigDesc" height="38">If this flag is set, the <code>window_geometry</code>
      parameters will be ignored, and the created window will cover the entire
      screen.&nbsp; The default is 0.</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">ontop</td>
    <td width="12%" class="ConfigType" height="38">Boolean</td>
    <td width="115%" class="ConfigDesc" height="38">If this flag is set, the 
	  window will appear on top of all other windows.</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">try_direct</td>
    <td width="12%" class="ConfigType" height="38">Boolean</td>
	<td width="115%" class="ConfigDesc" height="38"> If true, try to create a
	direct rendering visual.  X-Windows ONLY.  The default is 1.</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">force_direct</td>
    <td width="12%" class="ConfigType" height="38">Boolean</td>
    <td width="115%" class="ConfigDesc" height="38">
	  If true, do not allow the SPU to start if a direct rendering
	  visual is not available.  X-Windows ONLY.  The default is 0.</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">title</td>
    <td width="12%" class="ConfigType" height="38">String</td>
    <td width="115%" class="ConfigDesc" height="38">
	  Specifies the text to display in the titlebar of the window.
          Default is "Chromium Render SPU".</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">system_gl_path</td>
    <td width="12%" class="ConfigType" height="38">String</td>
    <td width="115%" class="ConfigDesc" height="38">
          Specifies the directory (path to) the OpenGL library to use.
          Default (on IRIX/Linux) is /usr/lib.</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">display_string</td>
    <td width="12%" class="ConfigType" height="38">String</td>
    <td width="115%" class="ConfigDesc" height="38">
          Name of the X display to create windows on.  The default is the
          null string, so the DISPLAY environment variable will be used.
          This option is only recognized when using the X Window System.
          </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">show_cursor</td>
    <td width="12%" class="ConfigType" height="38">Boolean</td>
    <td width="115%" class="ConfigDesc" height="38">
          If non-zero, render a <em>virtual cursor</em> which tracks the
          location of the user's mouse pointer in the application window.
          This typically only works well with applications that constantly
          redraw the 3D window's contents.  Default is 0.
          <br>
          Note: you must also set the application node's show_cursor
          option to make this work.</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">render_to_app_window</td>
    <td width="12%" class="ConfigType" height="38">Boolean</td>
    <td width="115%" class="ConfigDesc" height="38">
          If non-zero, the render SPU will render back into the original
          application window, instead of creating a new window.
          Default is 0.
          <br>
          Note: this option only works if the render SPU is using the same
          X display as the application.
          You may have to set the display_string option to match the
          application display.
          Otherwise, the render SPU will print a warning that the application
          window ID is invalid for the render SPU's display.
          </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">resizable</td>
    <td width="12%" class="ConfigType" height="38">Boolean</td>
    <td width="115%" class="ConfigDesc" height="38">
          If non-zero, the render SPU window will be resizable by the user.
          The readback SPU also recognizes this flag and will adjust its
          window size accordingly.
          Default is 0.</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">borderless</td>
    <td width="12%" class="ConfigType" height="38">Boolean</td>
    <td width="115%" class="ConfigDesc" height="38">
          If non-zero, remove the window border/decoration.
          Only supported on X at this time.
          Default is 0.</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">lut8</td>
    <td width="12%" class="ConfigType" height="38">768 Integers</td>
    <td width="115%" class="ConfigDesc" height="38">
		Specify an eight-bit/channel color lookup table. The first
		256 integers makeup the red lookup values, the next 256 make up the
		green lookup values, and the final make up the blue lookup values. For
		example, <br>
		<center>spu.Conf('lut8', [0, 1, 2, ..., 255, 0, 1, 2, ..., 255, 0, 1, 2, ..., 255]) </center><br>

				would provide the identity mapping.
		X-Windows ONLY.
   </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">swap_master_url</td>
    <td width="12%" class="ConfigType" height="38">String</td>
    <td width="115%" class="ConfigDesc" height="38">
		Specify the url to a master to attempt to better sync SwapBuffers. 
		Setting this option also enables the attempted sync. See also
		<code>is_swap_master</code> and <code>num_swap_clients</code>
   </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">is_swap_master</td>
    <td width="12%" class="ConfigType" height="38">Boolean</td>
    <td width="115%" class="ConfigDesc" height="38">
		Specify if this render spu is the master of a "swap group". Default
		value is 0. There should only be one master per group.
   </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">num_swap_clients</td>
    <td width="12%" class="ConfigType" height="38">Integer</td>
    <td width="115%" class="ConfigDesc" height="38">
		This specifies the number of clients in a swap group, not counting
		the master. This should be set for all swap masters.
   </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">use_osmesa</td>
    <td width="12%" class="ConfigType" height="38">Bool</td>
    <td width="115%" class="ConfigDesc" height="38">
		If set (and Chromium's compiled for it - see options.mk)
                use OSMesa for off-screen rendering.
   </td>
  </tr>

</table>


<a name="pack">
<h2 class="PageSubHeading">Pack SPU</h2>
<p>
The Pack SPU simply packs all the OpenGL commands into buffer which are
sent to the downstream server.
</p>
</p>
<table border="1" width="100%" height="149">
  <tr class="ConfigTableHeader">
    <td width="19%" height="19">Parameter Name</td>
    <td width="12%" height="19">Value Types</td>
    <td width="115%" height="19">Description</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="74">swapbuffer_sync</td>
    <td width="12%" class="ConfigType" height="74">Boolean</td>
    <td width="115%" class="ConfigDesc" height="74">If set to 1, do a
      synchronization operation in SwapBuffers to that the pack SPU
      doesn't buffer up frames faster than can be rendered downstream.
      The default is 1.</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">emit_GATHER_POST_SWAPBUFFERS</td>
    <td width="12%" class="ConfigType" height="38">Bool</td>
    <td width="115%" class="ConfigDesc" height="38">Purpose?
    </td>
  </tr>
</table>


<a name="readback">
<h2 class="PageSubHeading">Readback SPU</h2>
<p>
The Readback SPU is very similar to the Render SPU.  It's special in
that when SwapBuffers is called, the Readback SPU uses glReadPixels to
read the contents of the color/depth buffer(s) and sends them to the
next SPU in the chain with glDrawPixels.
This SPU is commonly used to implement sort-last rendering configurations.
</p>
<p>
Since the readback SPU is derived from the render SPU, it accepts all
configuration options that the render SPU accepts, plus a few more:
</p>
<table border="1" width="100%" height="149">
  <tr class="ConfigTableHeader">
    <td width="19%" height="19">Parameter Name</td>
    <td width="12%" height="19">Value Types</td>
    <td width="115%" height="19">Description</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="74">extract_depth</td>
    <td width="12%" class="ConfigType" height="74">Boolean</td>
    <td width="115%" class="ConfigDesc" height="74">If set to 1, the depth
      buffer values will be used to do <em>Z-compositing</em> of the color
      images.  This is used for <em>sort-last</em> configurations.
      The default is 0.</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="74">extract_alpha</td>
    <td width="12%" class="ConfigType" height="74">Boolean</td>
    <td width="115%" class="ConfigDesc" height="74">If set to 1, the alpha
      values will be sent along with the RGB values.
      The default is 0.</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">local_visualization</td>
    <td width="12%" class="ConfigType" height="38">Boolean</td>
    <td width="115%" class="ConfigDesc" height="38">If set to 1, SwapBuffers
      will be issued by the readback SPU so that you can actually see what's
      being rendered by the SPU.  The default is 0.</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">visualize_depth</td>
    <td width="12%" class="ConfigType" height="38">Boolean</td>
    <td width="115%" class="ConfigDesc" height="38">If set to 1, the depth
      buffer values will be sent downstream as a luminance image, rather
      than sending the RGB image.  This allows one to see the Z buffer
      values as a grayscale image.  The default is 0.</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">gather_url</td>
    <td width="12%" class="ConfigType" height="38">String</td>
    <td width="115%" class="ConfigDesc" height="38">???
    </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">gather_mtu</td>
    <td width="12%" class="ConfigType" height="38">Integer</td>
    <td width="115%" class="ConfigDesc" height="38">???
    </td>
  </tr>
</table>


<a name="tilesort">
<h2 class="PageSubHeading">Tilesort SPU</h2>
<p>
The Tilesort SPU is used to divide the framebuffer into tiles which are
rendered by separate render servers.
The tilesort SPU is usually used to drive tiled, cluster displays (murals).
The tilesort SPU must be the last SPU in the chain and be connected to
one or more downstream servers.
</p>
<table border="1" width="100%" height="149">
  <tr class="ConfigTableHeader">
    <td width="19%" height="19">Parameter Name</td>
    <td width="12%" height="19">Value Types</td>
    <td width="115%" height="19">Description</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">bucket_mode</td>
    <td width="12%" class="ConfigType" height="38">Enum</td>
    <td width="115%" class="ConfigDesc" height="38">
      This option controls how primitives are bucketed or sorted among the
      render servers.
      Possible values are:
      <ul>
      <li><B>'Broadcast'</B> - send all primitives to all servers.
      <li><B>'Test All Tiles'</B> - test each primitive's bounding box against
         all tile's bounds.  This is the default value.
      <li><B>'Uniform Grid'</B> - the tiles form a regular grid with uniform
         column widths and row heights.  Use a specially optimized bucketing
         algorithm.
      <li><B>'Non-Uniform Grid'</B> - the tiles form a regular grid but the
         columns and rows don't all have the same width or height.  An
         optimized bucketing algorithm will be used, but it's not as efficient
         as the Uniform Grid option.
      <li><B>'Random'</B> - primitives are sent to a randomly-chosen server.
      <li><B>'Warped Grid'</B> - the grid tiles do not form a uniform grid of
         any sort.  Test primitive's bounding boxes against all tiles, without
         trivial rejection (slow).
      <li><b>'Frustum'</B> - intended for use with
          <a href="nonplanar.html">non-planar tilesort</a>.
          Geometry is tested for intersection with each server's viewing
          frustum.
      </ul>
  </tr>

  <tr>
    <td width="19%" class="ConfigOption" height="38">scale_to_mural_size</td>
    <td width="12%" class="ConfigType" height="38">Boolean</td>
    <td width="115%" class="ConfigDesc" height="38">If set to 1, the OpenGL
      viewport will be rescaled to match the mural size (usually the desired
      behaviour).  If set to 0, the viewport will not be rescaled.  This is
      useful for conformance testing.  The default is 1.</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">retile_on_resize</td>
    <td width="12%" class="ConfigType" height="38">Boolean</td>
    <td width="115%" class="ConfigDesc" height="38">If non-zero, when the
      tilesort SPU's WindowSize() function is called, the SPU will try to
      find a new mural size and tile layout to match the new window size.
      Typically, the WindowSize() function is called only if the application
      node's track_window_size option is set.  The default is 1.<br>
      With some applications, setting track_window_size to 1 and
      retile_on_resize to 0 is needed to get reasonable results.</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">fake_window_dims</td>
    <td width="12%" class="ConfigType" height="38">2 Integers</td>
    <td width="115%" class="ConfigDesc" height="38">Specifies the default
      window/mural size when the application doesn't create an X or Win32
      application window (i.e. parallel applications, like psubmit).
      This is needed in order for <code>glViewport</code> and
      <code>glScissor</code> to work correctly.
      The Tilesort SPU's <code>glViewport</code> implementation will
      determine the size of the client window (if it exists)
      to determine what part of the output space the client is trying to
      restrict drawing to.&nbsp; However, if the Chromium context has been
      created out of thin air (i.e., with the <a href="parallelapplication.html">crCreateContext
      call</a>), the fake window dimensions will be returned.&nbsp; If these
      parameters are <i>not</i> set, and there is no client window, using <code>glViewport</code>
      or <code>glScissor</code> will cause a fatal run-time error.</td>
  </tr>

  <tr>
    <td width="19%" class="ConfigOption" height="38">scale_images</td>
    <td width="12%" class="ConfigType" height="38">Boolean</td>
    <td width="115%" class="ConfigDesc" height="38">
    If set, the images passed to glDrawPixels and glBitmap are scaled to
    match the mural's size.  glCopyPixels images are also scaled.
    The default is 0 (don't scale).</td>
  </tr>

  <tr>
    <td width="19%" class="ConfigOption" height="74">split_begin_end</td>
    <td width="12%" class="ConfigType" height="74">Boolean</td>
    <td width="115%" class="ConfigDesc" height="74">If this flag is set, the
      Tilesort SPU will break blocks of geometry into pieces if they happen to
      fall on a buffer boundary.&nbsp; This can happen if a lot of geometry is
      specified with no state changes, or if the MTU is small.&nbsp; If the flag
      is <i>not</i> set, then the Tilesort SPU will simply grow the geometry
      buffer beyond the MTU.&nbsp; The default is 1.</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">sync_on_swap</td>
    <td width="12%" class="ConfigType" height="38">Boolean</td>
    <td width="115%" class="ConfigDesc" height="38">If this flag is set, the
      Tilesort SPU will wait for a <code>SwapBuffers</code> call to be executed
      by all servers before continuing.&nbsp; This will keep the client
      application from getting more than one frame ahead of any of the servers,
      but it requires a round-trip network packet from each server.&nbsp; The
      default is 1.</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">sync_on_finish</td>
    <td width="12%" class="ConfigType" height="38">Boolean</td>
    <td width="115%" class="ConfigDesc" height="38">If this flag is set, the
      Tilesort SPU will wait for a <code>glFinish</code> call to be executed by
      all servers before continuing.&nbsp; The default is 1.</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">draw_bbox</td>
    <td width="12%" class="ConfigType" height="38">Boolean</td>
    <td width="115%" class="ConfigDesc" height="38">If this flag is set, the
      Tilesort SPU will add commands to the stream to draw the object-space
      bounding box around each block of geometry that is sent.&nbsp; This is
      useful for seeing the computed granularity of work, but it makes the
      stream of graphics commands more complex and uses some slow OpenGL
      commands like <code>glPushAttrib</code>.&nbsp; The default is 0.</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">bbox_line_width</td>
    <td width="12%" class="ConfigType" height="38">Float</td>
	<td width="115%" class="ConfigDesc" height="38">The width in pixels of the
	lines used to draw the bounding box.&nbsp; If the <code>draw_bbox</code>
	flag is not set, this parameter has no effect.&nbsp; The default is 5.</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">bbox_scale</td>
    <td width="12%" class="ConfigType" height="38">Float</td>
	<td width="115%" class="ConfigDesc" height="38">
        Specifies a scaling factor for bounding boxes.
        This is useful for vertex programs which perturb vertex positions.
        By setting the scale factor to 2.0, for example, you can be sure
        that warped/perturbed geometry still lies inside the bounding box.
	The default is 1.</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">use_dmx</td>
    <td width="12%" class="ConfigType" height="38">Boolean</td>
    <td width="115%" class="ConfigDesc" height="38">
    This should be set to 1 if using DMX.  When set, this option makes the
    tilesort SPU query the DMX server for updated window size/position
    information whenever the application window size/position changes.
    The DMX server information will be used to compute a new tile arrangment.
    The default is 0.</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">auto_dlist_bbox</td>
    <td width="12%" class="ConfigType" height="38">Boolean</td>
    <td width="115%" class="ConfigDesc" height="38">
	If set, automatically compute/use bounding boxes for display lists
        and bucketing.
        Without bounding boxes, all glCallList calls are broadcast to all
	servers.
        The default is 1.</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">lazy_send_dlists</td>
    <td width="12%" class="ConfigType" height="38">Boolean</td>
    <td width="115%" class="ConfigDesc" height="38">
	
    Send display lists to servers only when needed (lazy).
    Display lists are sent to each server as needed (by testing bounding
    boxes) instead of broadcasting the lists to all servers.
    The default is 0 (broadcast to all servers).</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">dlist_state_tracking</td>
    <td width="12%" class="ConfigType" height="38">Boolean</td>
    <td width="115%" class="ConfigDesc" height="38">
    If set, record state changes in display lists to keep GL state consistant.
    There is a performance penalty for enabling state tracking.
    Off by default.
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">force_quad_buffering</td>
    <td width="12%" class="ConfigType" height="38">Boolean</td>
    <td width="115%" class="ConfigDesc" height="38">
    If set, force a non-stereo application into stereo mode.
    Each frame will be rendered twice, once with glDrawBuffer(GL_LEFT) and
    once with glDrawBuffer(GL_RIGHT).
    Off by default.
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">stereo_mode</td>
    <td width="12%" class="ConfigType" height="38">Enum</td>
    <td width="115%" class="ConfigDesc" height="38">
    Specifies the stereo rendering mode to use.
    May be one of <b>None, Passive, CrystalEyes, SideBySide, Anaglyph</b>.
    The default is None.
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">glasses_type</td>
    <td width="12%" class="ConfigType" height="38">Enum</td>
    <td width="115%" class="ConfigDesc" height="38">
    Specifies the type of colored glasses used for anaglyph stereo mode.
    May be one of <b>RedBlue, RedGreen, RedCyan, BlueRed, GreenRed,
    CyanRed</b>.
    The default is RedBlue.
  </tr>

</table>

<h4>Additional notes on the Tilesort SPU and display lists</h4>

<nl>
<li>There may be problems with nested calls inside display lists
    since it isn't possible to track the bounding boxes of display
    lists with nested calls
<li>Some problems may occur with glRasterPos glDrawPixels etc..
<li>The lazy send support for glCallLists does only broadcast on
    demand since there is no support for auto bounding boxes for
    glCallLists.
<li>If a screen-space or object-space bounding box is active, display
    lists are subjected to bucketing like other glBegin/End
    primitives.  It's up to the application programmer to call
    glChromiumParameterv(GL_OBJECT_BBOX_CR, ...) to specify a
    bounding box for subsequent glCallLists.
<li>If a bounding box is not active when glCallList is called, the
    display list (and any outstanding state changes) are broadcast
    to all servers.  We really have to play it safe in this
    situation since the tilesort SPU has no idea what's
    encapsulated inside a display list.

</nl>



<a name="binaryswap">
<h2 class="PageSubHeading">Binaryswap SPU</h2>
<p>
The Binaryswap SPU implements the well known <i>binary swap</i> method
of image compositing.  It works similar to the Readback SPU.  Since
the Binaryswap SPU is derived from the Render SPU, all the Render SPU
options are applicable to the Binaryswap SPU.  See
cr/mothership/configs/psubmit_bswap.conf for an example of how to use
this SPU.
</p>
<table border="1" width="100%" height="149">
  <tr class="ConfigTableHeader">
    <td width="19%" height="19">Parameter Name</td>
    <td width="12%" height="19">Value Types</td>
    <td width="115%" height="19">Description</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="20">peers</td>
    <td width="12%" class="ConfigType" height="20">String</td>
    <td width="115%" class="ConfigDesc" height="20">
    List of peer nodes.  There <b><i>must</i></b> be a power of two number of
    nodes.  The list of nodes <i>must</i> also be listed in the order
    the nodes are defined in, e.g. node0 must be listed before node1.
    </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="20">node_number</td>
    <td width="12%" class="ConfigType" height="20">Integer</td>
    <td width="115%" class="ConfigDesc" height="20">

The number of the node in relation to the swap ordering.  Binary swap
compositing requires a specific ordering of the nodes to correctly do
alpha compositing.  A power-of-two ordering defines this order such that
nodes 0 and 1 swap, 2 and 3 swap, etc.  The next phase has 0 and 2 swap,
then 1 and 3, etc.  The number defined here specifies where in this
compositing order the node should be placed.  If your final image is
composited incorrectly, double check the node ordering you setup here.  If
this explanation is confusing, you might read <a
href="http://www.acl.lanl.gov/viz/pdfs/94-cga.pdf">the original binary swap
paper</a>.


    </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="20">local_visualization</td>
    <td width="12%" class="ConfigType" height="20">Boolean</td>
    <td width="115%" class="ConfigDesc" height="20">
    If true, intermediate rendering will be displayed in the binary swap
    SPU's window.
    </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="20">type</td>
    <td width="12%" class="ConfigType" height="20">Enum</td>
    <td width="115%" class="ConfigDesc" height="20">
      Controls whether depth or alpha buffers are used to composite images.
      Possible value are <b>depth</b> and <b>alpha</b>.
    </td>
  </tr>
</table>


<a name="saveframe">
<h2 class="PageSubHeading">Saveframe SPU</h2>
<p>
The Savefame SPU saves the image from the colorbuffer to a file whenever
SwapBuffers is called.  It's useful for "screengrabs".
</p>
<table border="1" width="100%" height="149">
  <tr class="ConfigTableHeader">
    <td width="19%" height="19">Parameter Name</td>
    <td width="12%" height="19">Value Types</td>
    <td width="115%" height="19">Description</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="74">geometry</td>
    <td width="12%" class="ConfigType" height="74">4 Integers</td>
    <td width="115%" class="ConfigDesc" height="74">
      Geometry of the frame to save.  This is specified as four integer
      numbers.&nbsp; The first two give the (<i>x</i>,<i>y</i>) position of
      the upper left corner of the frame, relative to the upper left corner
      of the window.&nbsp; The last two numbers give the width and height
      of the frame, respectively.  Any call to glViewport will override any
      settings given in this parameter.  If no glViewport call has been
      made, and no geometry is set, the saveframe SPU does nothing.

    </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">spec</td>
    <td width="12%" class="ConfigType" height="38">String</td>
    <td width="115%" class="ConfigDesc" height="38">
      A full specification of the filename to which to save frames. This
      should include a path (absolute or relative to the working directory
      of the crserver) and a filename. The filename should have <code>%d</code>
      in it to indicate where the frame number should be inserted.
      <b>Note</b>: In Python strings, the percent sign is interpreted, so
      you must insert a percent sign with <code>%%</code> instead of <code>%</code>.
      For example, <code>saveframespu.Conf( "spec", "myMovie/frame%%d.ppm" )</code>
      would save frames in the <code>myMovie</code> directory (assumed to be
      present in the working directory where crserver is started). Frames
      would be named <code>frame1.ppm</code>, <code>frame2.ppm</code>, 
      <code>frame3.ppm</code>, ...  <code>frame<i>n</i>.ppm</code>. 
      The default is "<code>frame%04d.ppm</code>".
    </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">basename</td>
    <td width="12%" class="ConfigType" height="38">String</td>
    <td width="115%" class="ConfigDesc" height="38">
      <b>Note</b>: This option is obsolete. Use the <code>spec</code> option instead.
      Base of the filename to which to save files.  All files will have a
      four-digit frame number and <code>.ppm</code> appended to them.  Example:
      <code>frame0000.ppm</code>.  This parameter allows you to modify the
      filename.  There is no default. If both a basename and spec option are
      given, the spec option overrides the basename.
    </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">format</td>
    <td width="12%" class="ConfigType" height="38">String</td>
    <td width="115%" class="ConfigDesc" height="38">
      The format option specifies the file format used to save frames.
      Currently, it must be "<code>ppm</code>" or "<code>jpeg</code>".
      The default is "<code>ppm</code>".
    </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">stride</td>
    <td width="12%" class="ConfigType" height="38">Integer</td>
    <td width="115%" class="ConfigDesc" height="38">
      Sets the number of frames to skip.  The default is 1.  This means
      that every frame is saved.  Setting to 2 means to only save every
      other frame.
    </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">single</td>
    <td width="12%" class="ConfigType" height="38">Integer</td>
	<td width="115%" class="ConfigDesc" height="38">
          Specifies saving a single frame.
          If this parameter is set, the saveframe SPU will only save a
          single frame.  Set this to the frame number of the frame to save.
          The default is unset.
        </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">binary</td>
    <td width="12%" class="ConfigType" height="38">Boolean</td>
	<td width="115%" class="ConfigDesc" height="38">
          Specifies whether the PPM should be binary or not.
          If this parameter is set to true, saved images will be in "raw"
          PPM format.  If this parameter is set to false, saved images will
          be in "ascii" PPM format.  The default is true (binary).

        </td>
  </tr>
</table>


<a name="motionblur">
<h2 class="PageSubHeading">Motionblur SPU</h2>
<p>
The Motionblur SPU uses the accumulation buffer to simulate motion blur of
moving objects.
</p>
<table border="1" width="100%" height="149">
  <tr class="ConfigTableHeader">
    <td width="19%" height="19">Parameter Name</td>
    <td width="12%" height="19">Value Types</td>
    <td width="115%" height="19">Description</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">blur</td>
    <td width="12%" class="ConfigType" height="38">Enum</td>
	<td width="115%" class="ConfigDesc" height="38">
	  This specifies the amount of motion blur.
          Legal values are 'Little', 'Medium', 'Lots', and 'Extreme'.
          The default is 'Medium'.
        </td>
  </tr>
</table>


<a name="hiddenline">
<h2 class="PageSubHeading">Hiddenline SPU</h2>
<p>
The Hiddenline SPU draws objects in hidden-line mode.
</p>
<table border="1" width="100%" height="149">
  <tr class="ConfigTableHeader">
    <td width="19%" height="19">Parameter Name</td>
    <td width="12%" height="19">Value Types</td>
    <td width="115%" height="19">Description</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">buffer_size</td>
    <td width="12%" class="ConfigType" height="38">int</td>
	<td width="115%" class="ConfigDesc" height="38">
          The size of command buffer used for recording OpenGL commands
          (in bytes).  Default is 32768.
        </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">poly_color</td>
    <td width="12%" class="ConfigType" height="38">3 Floats</td>
	<td width="115%" class="ConfigDesc" height="38">
	  Sets the polygon color (red, green, blue).
          Default is white (1, 1, 1).
        </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">line_color</td>
    <td width="12%" class="ConfigType" height="38">3 Floats</td>
	<td width="115%" class="ConfigDesc" height="38">
	  Sets the line color (red, green, blue).
          Default is pale black (0, 0, 0).
        </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">line_width</td>
    <td width="12%" class="ConfigType" height="38">Float</td>
	<td width="115%" class="ConfigDesc" height="38">
	  Sets the line width (in pixels).  Default is 3.
        </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">silhouette_mode</td>
    <td width="12%" class="ConfigType" height="38">Boolean</td>
	<td width="115%" class="ConfigDesc" height="38">
          If set, just render silhouette lines instead of all polygon edges.
        </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">fog_color</td>
    <td width="12%" class="ConfigType" height="38">3 Floats</td>
	<td width="115%" class="ConfigDesc" height="38">
	  Sets the fog color (red, green, blue) when using silhouette mode.
        </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">single_clear</td>
    <td width="12%" class="ConfigType" height="38">Boolean</td>
	<td width="115%" class="ConfigDesc" height="38">
          Controls whether glClear commands are ignored when issued but
          later called in SwapBuffers.  Default is true.
          You may need to set this to false for sort-last rendering.
        </td>
  </tr>
</table>


<a name="wet">
<h2 class="PageSubHeading">Wet SPU</h2>
<p>
The Wet SPU causes the image to appear wavy, as if viewed through water.
</p>
<table border="1" width="100%" height="149">
  <tr class="ConfigTableHeader">
    <td width="19%" height="19">Parameter Name</td>
    <td width="12%" height="19">Value Types</td>
    <td width="115%" height="19">Description</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">density</td>
    <td width="12%" class="ConfigType" height="38">Integer</td>
	<td width="115%" class="ConfigDesc" height="38">
          Description?
          Default is 5.
        </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">raininess</td>
    <td width="12%" class="ConfigType" height="38">Integer</td>
	<td width="115%" class="ConfigDesc" height="38">
          Description?
          Default is 10.
        </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">mesh_dice</td>
    <td width="12%" class="ConfigType" height="38">Integer</td>
	<td width="115%" class="ConfigDesc" height="38">
          Number of rows and columns of control points in the underlying
          quadrilateral mesh which is distorted.
          Default is 100 rows and columns.
        </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">ripple_freq</td>
    <td width="12%" class="ConfigType" height="38">Float</td>
	<td width="115%" class="ConfigDesc" height="38">
          Ripple frequency.  Default is 2.
        </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">ripple_scale</td>
    <td width="12%" class="ConfigType" height="38">Float</td>
	<td width="115%" class="ConfigDesc" height="38">
          Scale factor for water ripples.  Default is 1.
        </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">time_scale</td>
    <td width="12%" class="ConfigType" height="38">Float</td>
	<td width="115%" class="ConfigDesc" height="38">
          Time scale factor.  Default is 1.
        </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">ior</td>
    <td width="12%" class="ConfigType" height="38">Float</td>
	<td width="115%" class="ConfigDesc" height="38">
          Index of refraction (between air and water?).
          Default is 1.2.
        </td>
  </tr>
</table>


<a name="perf">
<h2 class="PageSubHeading">Perf SPU</h2>
<p>
The <a href="performance.html">Perf SPU</a> is used to collect
performance statistics while running Chromium.
</p>
<table border="1" width="100%" height="149">
  <tr class="ConfigTableHeader">
    <td width="19%" height="19">Parameter Name</td>
    <td width="12%" height="19">Value Types</td>
    <td width="115%" height="19">Description</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">log_file</td>
    <td width="12%" class="ConfigType" height="38">String</td>
	<td width="115%" class="ConfigDesc" height="38">
          Path to a log file for performance data. Default is stderr.
        </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">token</td>
    <td width="12%" class="ConfigType" height="38">String</td>
	<td width="115%" class="ConfigDesc" height="38">
          Mark 'interesting' performance data with tokens. Default is 'tab'.
        </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">log_separator</td>
    <td width="12%" class="ConfigType" height="38">String</td>
	<td width="115%" class="ConfigDesc" height="38">
          Field separator for logged data. Default is 'tab'.
        </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">dump_on_swap_count</td>
    <td width="12%" class="ConfigType" height="38">Integer</td>
	<td width="115%" class="ConfigDesc" height="38">
          Trigger when data is to be 'dumped' on hitting this amount of SwapBuffer calls. Default 0.
        </td>
  </tr>
    <td width="19%" class="ConfigOption" height="38">mothership_log</td>
    <td width="12%" class="ConfigType" height="38">Boolean</td>
	<td width="115%" class="ConfigDesc" height="38">
          Send performance data to a mothership log file. Set CR_PERF_MOTHERSHIP_LOGFILE to a file on the mothership for data collection. This allows for gathering of data from multiple nodes. Default 0.
        </td>
  </tr>
    <td width="19%" class="ConfigOption" height="38">dump_on_flush</td>
    <td width="12%" class="ConfigType" height="38">Boolean</td>
	<td width="115%" class="ConfigDesc" height="38">
          Will cause performance data to be 'dumped' when glFlush is called. Useful if SwapBuffers is not used. Default 0.
        </td>
  </tr>
  </tr>
    <td width="19%" class="ConfigOption" height="38">dump_on_finish</td>
    <td width="12%" class="ConfigType" height="38">Boolean</td>
	<td width="115%" class="ConfigDesc" height="38">
          Will cause performance data to be 'dumped' when glFinish is called. Useful if SwapBuffers is not used. Default 0.
        </td>
  </tr>
</table>


<a name="array">
<h2 class="PageSubHeading">Array SPU</h2>
<p>
The Array SPU implement's OpenGL's vertex arrays.  If your application uses
vertex arrays, the array SPU should be the first one in the SPU chain.
The Array SPU has no configuration options.
</p>


<a name="feedback">
<h2 class="PageSubHeading">Feedback SPU</h2>
<p>
The Feedback SPU implement's OpenGL's selection and feedback features.
If your application needs either of these features, you should use the
Feedback SPU in your configuration.
</p>
<table border="1" width="100%" height="149">
  <tr class="ConfigTableHeader">
    <td width="19%" height="19">Parameter Name</td>
    <td width="12%" height="19">Value Types</td>
    <td width="115%" height="19">Description</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">default_viewport</td>
    <td width="12%" class="ConfigType" height="38">Boolean</td>
	<td width="115%" class="ConfigDesc" height="38">
          The feedbackSPU will answer glGet's for GL_VIEWPORT. When
          enabled the feedbackSPU will return the applications viewport size 
          rather than the tilesortSPU returning the scaled viewport size.
          Default 0.
        </td>
  </tr>
</table>
</table>
</table>


<a name="expando">
<h2 class="PageSubHeading">Expando SPU</h2>
<p>
The Expando SPU records the contents of display lists, then replays the
commands when glCallList is called.  The Expando SPU has no options.
</p>


<a name="injector">
<h2 class="PageSubHeading">Injector SPU</h2>
<p>
XXX no description?
</p>


<a name="replicate">
<h2 class="PageSubHeading">Replicate SPU</h2>
<p>
The Replicate SPU works in-conjunction with another SourceForge project
at <a href=http://xf4vnc.sourceforge.net>http://xf4vnc.sourceforge.net</a>. With both projects it allows a special
enhanced-VNC client developed by <a href=http://www.tungstengraphics.com>Tungsten Graphics, Inc.</a> the ability to do direct rendering and gain the
performance of the local graphics card at the viewer. Contact <a href=http://www.tungstengraphics.com>Tungsten Graphics, Inc.</a> for more information. 
</p>


<a name="simplequery">
<h2 class="PageSubHeading">Simplequery SPU</h2>
<p>
The Simplequery SPU intercepts all OpenGL glGet*() functions and returns
simple default values.  This is useful when using <i>file networking</i>
which records command streams to files.
</p>


<a name="zpix">
<h2 class="PageSubHeading">ZPix SPU</h2>
<p>
The ZPix SPU offers frame differencing and some simple-minded compression 
schemes to reduce network bandwidth for glDrawPixels.
ZPix was built to work with the ReadbackSPU and currently only
handles frame buffer writes which begin at 0,0. 
Frame differences are tracked in three logical buffers;
one each for color, depth, and stenciling.
<p>
For applications with a lot of image coherence, frame differencing
often results in many unchanged pixels which compress significantly..
The default GNU zlib compression scheme minimizes network
bandwidth while the PLE compression scheme takes advantage of
the special case of zero data values in the differenced frames to
get good compression with much less CPU resource.
<p>
When multiple clients feed a server, it is necessary to track
differences on a per client basis.
To disambiguate multiple instances use the <b>client_id</b>
to assign a unique integer id for each client.
<p>
Frame differencing is independent of compression and can be suppressed
with the <b>no_diff</b> option.
A useful artifact of suppressing frame differencing can be
obtained by just suppressing it on the server. What results is a
display where identical pixels are black and changed ones
are not (although the colors may be whimsical and the
depth buffer may become quite comical). 
<p>
Several additional options provide for more verbose output
and debugging.  
<table border="1" width="100%" height="149">
  <tr class="ConfigTableHeader">
    <td width="19%" height="19">Parameter Name</td>
    <td width="12%" height="19">Value Types</td>
    <td width="115%" height="19">Description</td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">ztype</td>
    <td width="12%" class="ConfigType" height="38">Enum</td>
	<td width="115%" class="ConfigDesc" height="38">
	  This specifies the compress algorithm to use:
           <dd> 0 - None
           <dd> 1 - GNU zlib compression (zparm -1 or 1-9)
           <dd> 2 - RLE (unimplemented)
           <dd> 3 - PLE a chromium-inspired RLE 
        <br>Default is 1 (GNU zlib) 
        </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">ztype_parm</td>
    <td width="12%" class="ConfigType" height="38">Int</td>
	<td width="115%" class="ConfigDesc" height="38">
	  Arbitrary parameter to pass to compression.
          <br>Default = -1 (what zlib expects)
        </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">client_id</td>
    <td width="12%" class="ConfigType" height="38">Int</td>
	<td width="115%" class="ConfigDesc" height="38">
	  Client identification to use for tracking differences
          <br>Default = 0
        </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">verbose</td>
    <td width="12%" class="ConfigType" height="38">Bool</td>
	<td width="115%" class="ConfigDesc" height="38">
          If TRUE, compression statistics  printed for each frame
        </td>
  <tr>
    <td width="19%" class="ConfigOption" height="38">debug</td>
    <td width="12%" class="ConfigType" height="38">Bool</td>
	<td width="115%" class="ConfigDesc" height="38">
          If TRUE, then perform additional debugging checks
          with each frame
        </td>
  </tr>
  <tr>
    <td width="19%" class="ConfigOption" height="38">no_diff</td>
    <td width="12%" class="ConfigType" height="38">Bool</td>
	<td width="115%" class="ConfigDesc" height="38">
           <dd> 0 - (default) do frame differencing
           <dd> 1 - suppress frame differencing
        </td>
  </tr>
</table>


<a name="nop">
<h2 class="PageSubHeading">Nop SPU</h2>
<p>
The Nop (No-operation) SPU effectively discards all commands sent to it.
One use of the Nop SPU is to replace the Render SPU in order to measure
system performance without doing any rendering.
</p>



<br>

</body>

</html>
